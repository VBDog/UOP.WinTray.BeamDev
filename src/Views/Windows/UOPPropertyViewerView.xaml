<Window x:Class="UOP.WinTray.UI.Views.Windows.UOPPropertyViewerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:views="clr-namespace:UOP.WinTray.UI.Views"  
             xmlns:local="clr-namespace:UOP.WinTray.UI.Views.UserControls"
             xmlns:viewModels="clr-namespace:UOP.WinTray.UI.ViewModels"
             xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs"
             md:DialogServiceViews.IsRegistered="True"
         xmlns:viewmodels="clr-namespace:UOP.WinTray.UI.ViewModels"
        d:DataContext="{d:DesignInstance Type=viewmodels:UOPPropertyViewerViewModel}"
        
             mc:Ignorable="d" Title="UOP Property View" Width="500" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style TargetType="RadioButton" x:Key="rBStyle">
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style TargetType="TextBlock" x:Key="nodeTextBlock">
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Tag" Value="{Binding Path}"/>
          
            <Style.Triggers >

                <DataTrigger Binding="{Binding Colour}" Value="Gray">
                    <Setter Property="Foreground" Value="Gray"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding Colour}" Value="Black">
                    <Setter Property="Foreground" Value="Black"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Colour}" Value="Blue">
                    <Setter Property="Foreground" Value="Blue"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Colour}" Value="Red">
                    <Setter Property="Foreground" Value="Red"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="Button" x:Key="btnTreeNode">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Content" Value="{Binding NodeName}"/>
            <Setter Property="ToolTip" Value="{Binding NodeName}"/>
            <Setter Property="Tag" Value="{Binding Path}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="White"/>
                </Trigger>
                <DataTrigger Binding="{Binding Colour}" Value="Gray">
                    <Setter Property="Foreground" Value="Gray"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding Colour}" Value="Black">
                    <Setter Property="Foreground" Value="Black"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Colour}" Value="Blue">
                    <Setter Property="Foreground" Value="Blue"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Colour}" Value="Red">
                    <Setter Property="Foreground" Value="Red"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <DataTemplate x:Key="step4">
            <TextBlock Text="{Binding Path=DisplayName}"/>
        </DataTemplate>
        <DataTemplate x:Key="step3">
            <TextBlock Text="{Binding Path=DisplayName}"/>
        </DataTemplate>
        <HierarchicalDataTemplate x:Key="step2"
                                  ItemsSource="{Binding Members}"
                                  ItemTemplate="{StaticResource step3}">

            <TextBlock  Style="{StaticResource nodeTextBlock}">
            <Button Style="{StaticResource btnTreeNode}"/>
            </TextBlock>

        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate x:Key="step1"
                                  ItemsSource="{Binding Members}"
                                  ItemTemplate="{StaticResource step2}">
            <TextBlock  Style="{StaticResource nodeTextBlock}">
            <Button Style="{StaticResource btnTreeNode}"/>
            </TextBlock>

        </HierarchicalDataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="{Binding HeaderText, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" FontSize="11" Margin="10,0,0,4"/>
        <Border x:Name="bdrTreeView" Grid.Row="1" BorderBrush ="Black" BorderThickness="0.5" Margin="5,5,5,5"   VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
            <!--<ScrollViewer  Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">-->
                <views:UOPPropertyTreeView HorizontalAlignment="Stretch"  DataContext="{Binding TreeViewModel}" Margin="5" MaxHeight="{Binding ElementName=bdrTreeView, Path=ActualHeight}"  />

                <!--<TreeView x:Name="treeView" ItemTemplate="{StaticResource step1}" 
                  ItemsSource="{Binding TreeViewNodes,UpdateSourceTrigger=PropertyChanged}"/>-->
            <!--</ScrollViewer>-->
        </Border>
        <TextBlock Text="{Binding SelectedText,UpdateSourceTrigger=PropertyChanged}" Grid.Row="2"/>
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <ToggleButton 
                         CommandParameter="{Binding IsChecked, RelativeSource={RelativeSource Self}}"
                        Style="{StaticResource UnitsToggleButtonStyle_Small}"  
                        IsChecked="{Binding IsEnglishSelected,Mode=TwoWay }"
                        Height="20"
                        FontSize="8"
                        Visibility="{Binding Visibility_ShowUnits}"
                        HorizontalAlignment="Left" 
                            Margin="50,0,20,0"
                        />
            <!--<WrapPanel Grid.Column="0">
                <RadioButton Content="English" Style="{StaticResource rBStyle}" IsChecked="{Binding IsEnglishSelected,UpdateSourceTrigger=PropertyChanged}"/>
                <RadioButton Content="Metric" Style="{StaticResource rBStyle}" IsChecked="{Binding IsMetricSelected,UpdateSourceTrigger=PropertyChanged}"/>
            </WrapPanel>-->
            <WrapPanel Grid.Column="1" HorizontalAlignment="Right">
                <Button Content="Close" Margin="10" Style="{StaticResource WrapButton}" Command="{Binding Command_Close}" IsCancel="True"/>
            </WrapPanel>
        </Grid>
        <CheckBox Content="Show Hidden Properties?" Grid.Row="4" Margin="10" IsChecked="{Binding ShowHidden,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Visibility_ShowHidden}" />
    </Grid>
</Window>
