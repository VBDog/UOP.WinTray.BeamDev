<Window x:Class="UOP.WinTray.UI.Views.Windows.Edit_MDProject_View"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:waitIndicator="clr-namespace:UOP.WinTray.UI.CustomControls.AdornerControl"
        xmlns:local="clr-namespace:UOP.WinTray.UI.Views.Windows"
        xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs"
        md:DialogServiceViews.IsRegistered="True"     
        mc:Ignorable="d"
        MaxHeight="{x:Static SystemParameters.MaximizedPrimaryScreenHeight}"
        SizeToContent="WidthAndHeight"
        Title ="{Binding ProjectTitle}" 
        WindowStartupLocation="CenterOwner"
        xmlns:CustomProperty="clr-namespace:UOP.WinTray.UI.Behaviors"
        xmlns:convertors="clr-namespace:UOP.WinTray.UI"
        xmlns:converter="clr-namespace:UOP.WinTray.UI.Converters"
        xmlns:CC="clr-namespace:UOP.WinTray.UI.CustomControls"
        xmlns:viewmodels="clr-namespace:UOP.WinTray.UI.ViewModels"
        d:DataContext="{d:DesignInstance Type=viewmodels:Edit_MDProject_ViewModel}"
        
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:system="clr-namespace:System;assembly=mscorlib"
        Style="{StaticResource PopUpWindowTheme}"
        FocusManager.FocusedElement="{Binding ElementName=txtKeyNo}"
       Loaded="Window_Loaded"
Unloaded="Window_Unloaded"
        >
    <Window.Resources>
        <system:Boolean x:Key="True">True</system:Boolean>
        <system:Boolean x:Key="False">False</system:Boolean>
        <convertors:EnumMatchToBooleanConverter x:Key="enumMatchToBooleanConverter">
        </convertors:EnumMatchToBooleanConverter>
        <converter:RadioButtonCheckedConverter x:Key="RadioButtonCheckedConverter"/>
        <converter:BooleanToVisibilityConverter x:Key="VisibleIfTrueConverter" />
        <Style TargetType="{x:Type Button}" x:Key="WrapButton"  BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Margin" Value="1 0 1 0"></Setter>
            <Setter Property="Height" Value="25"></Setter>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="70"></Setter>
            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
            <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
            <Setter Property="Background" Value="AliceBlue"></Setter>
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <TextBlock TextAlignment="Center" Text="{TemplateBinding Content}" TextWrapping="Wrap" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--Style for Local Linear Units Text Block-->
        <Style x:Key="Local_LinearUnitLabel" TargetType="{x:Type Label}" >
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property ="Width" Value="Auto" />
            <Setter Property ="HorizontalAlignment" Value="Left" />
            <Setter Property="FontStyle" Value="Normal" />
            <Setter Property="MinWidth" Value="25" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Visibility" Value="Visible" />


        </Style>
        <Style x:Key="Local_TextBox_Style" TargetType="TextBox">
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="1,1,5,1"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="30"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Background" Value="AliceBlue"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!--Style for Combobox-->
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox" BasedOn="{StaticResource ComboBoxStyle}">
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Height" Value="25"/>
        </Style>
        <!--Style for TextBox-->
        <Style x:Key="Local_TextBoxHeight" TargetType="TextBox" BasedOn="{StaticResource TextBoxStyle}">
            <Setter Property="Height" Value="25"></Setter>
            <Setter Property="Width" Value="80"/>
            <Setter Property="BorderBrush" Value="Black"></Setter>
        </Style>
    </Window.Resources>
    <Grid x:Name="MainGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <!--<xceed:BusyIndicator IsBusy="{Binding IsBusyVisible,Mode=TwoWay}" >
                <xceed:BusyIndicator.BusyContent>
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Margin="5,0">
                            <waitIndicator:LoadingWait/>
                            <TextBlock Text="{Binding BusyMessage, Mode=TwoWay}" FontSize="20" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </xceed:BusyIndicator.BusyContent>
                <xceed:BusyIndicator.OverlayStyle>
                    <Style TargetType="Rectangle">
                        <Setter Property="Fill" Value="Black" />
                        <Setter Property="Opacity" Value="0.3" />
                    </Style>
                </xceed:BusyIndicator.OverlayStyle>
                <xceed:BusyIndicator.ProgressBarStyle>
                    <Style TargetType="ProgressBar">
                        <Setter Property="Visibility" Value="Collapsed" />
                    </Style>
                </xceed:BusyIndicator.ProgressBarStyle>-->

                <GroupBox Margin="5" Style="{StaticResource GlobalGroupBoxStyle}" BorderThickness="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Grid Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <!--Required Project Data-->
                            <RowDefinition Height="180"/>
                            <!--Optional Project Data-->
                            <RowDefinition Height="340"/>
                            <!--Reference Control Constants-->
                            <RowDefinition Height="auto"></RowDefinition>
                            <!--Cancel Bbutton-->
                            <RowDefinition Height="30"/>
                            <!--New WinTray Project-->
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <GroupBox Style="{StaticResource GlobalGroupBoxStyle}" Grid.Row="0" Grid.Column="0" Header="Required Project Data" Margin="1,0,-1,0">
                            <Grid Margin="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="65"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>

                                </Grid.ColumnDefinitions>
                                <!--Project Type row-->
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch">
                                    <Label Style="{StaticResource LabelStyle}" Content="Project Type: "/>
                                    <Label Style="{StaticResource LabelStyle}" Content="{Binding SelectedProjectType, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                
                                </StackPanel>

                                <!--Key No Row-->
                                <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Left">
                                    <Label Style="{StaticResource LabelStyle}" Content="Key No: " />
                                    <CC:CustomTextBox KeyDown="OnKeyPressHandler"  KeyUp="OnKeyPressHandler" x:Name="txtKeyNo" Text="{Binding KeyNumber, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" MaxLength="6" Style="{StaticResource Local_TextBoxHeight}" CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedKeyNo, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" Grid.Column="1" />
                                    

                                    <!--Rev No Column-->
                                    <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Left" Visibility="{Binding Visibility_NewProject}">
                                        <Label Style="{StaticResource LabelStyle}" Content="Rev. No :" Width="Auto" VerticalAlignment="Top" Visibility="{Binding EditProjectPropertyVisibilty,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource VisibleIfTrueConverter}}"/>
                                        <CC:NumericTextBox KeyDown="OnKeyPressHandler" KeyUp="OnKeyPressHandler" x:Name="txtRevyNo" IsWholeNumber="True" ZerosAsNullString="True" Text="{Binding RevNo, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" MaxLength="2" Style="{StaticResource Local_TextBoxHeight}"  Width="52" 
                                               Visibility="{Binding EditProjectPropertyVisibilty, Converter={StaticResource VisibleIfTrueConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  
                                               CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedKeyNo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  />
                                    </StackPanel>
                                </StackPanel>
                                <!--ManHole Manhol ID Row-->

                                <StackPanel Orientation="Horizontal"  Grid.Row="2" Grid.Column="1">
                                    <Label Style="{StaticResource LabelStyle}" Content="Manhole ID: " Grid.Row="2" Grid.Column="0"/>
                                    <CC:NumericTextBox 
                                    x:Name="tbManHoleID" 
                                    Text="{Binding ManholeID, Mode=TwoWay,StringFormat=f4,UpdateSourceTrigger=LostFocus}"
                                    MaxLength="7" 
                                    ZerosAsNullString="True"
                                    KeyDown="OnKeyPressHandler" 
                                    KeyUp="OnKeyPressHandler" 
                                    Style="{StaticResource Local_TextBoxHeight}" 
                                    CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedManholeId, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  
                                    
                                    />
                                    <Label  Content = "{Binding LinearUnitsLabel}"  Style="{StaticResource Local_LinearUnitLabel}"  />
                                    <StackPanel Orientation="Horizontal" Visibility="{Binding VisibilityMDDraw}" >
                                        <Label Style="{StaticResource LabelStyle}" Content="Ring Thk: "/>
                                        <CC:NumericTextBox 
                                    x:Name="tbRingThk" 
                                    Text="{Binding RingThickness, Mode=TwoWay,StringFormat=f4,UpdateSourceTrigger=LostFocus}"
                                    MaxLength="7" 
                                    KeyDown="OnKeyPressHandler" 
                                    KeyUp="OnKeyPressHandler" 
                                    ZerosAsNullString="True"
                                    Style="{StaticResource Local_TextBoxHeight}" 
                                    CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedRingThickness, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  
                                    
                                    />
                                        <Label  Content = "{Binding LinearUnitsLabel}"  Style="{StaticResource Local_LinearUnitLabel}"  />
                                    </StackPanel>
                                </StackPanel>

                                <Grid Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1.2*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <GroupBox Header="Installation Type" Style="{StaticResource GlobalGroupBoxStyle}" Grid.Row="0" Grid.Column="0">
                                        <StackPanel Orientation="Vertical" Margin="0,5,0,0">
                                            <RadioButton Content="Grassroots" GroupName="InstallationType" 
                                              IsChecked="{Binding InstallationType, Mode=TwoWay,
                                    Converter={StaticResource  ResourceKey=enumMatchToBooleanConverter},
                                    ConverterParameter=GrassRoots}" />
                                            <RadioButton Content="Revamp" GroupName="InstallationType" 
                                             IsChecked="{Binding InstallationType, Mode=TwoWay,
                                    Converter={StaticResource  ResourceKey=enumMatchToBooleanConverter},
                                    ConverterParameter=Revamp}" Margin="0,5,0,0"/>
                                        </StackPanel>
                                    </GroupBox>
                                    <GroupBox Header="Bolting" Style="{StaticResource GlobalGroupBoxStyle}" Margin="5,0,0,0" Grid.Row="0" Grid.Column="1">
                                        <StackPanel Orientation="Vertical" Margin="0,5,0,0">
                                            <RadioButton Content="English" GroupName="Bolting" 
                                              IsChecked="{Binding Bolting, Mode=TwoWay,
                                    Converter={StaticResource  ResourceKey=enumMatchToBooleanConverter},
                                    ConverterParameter=English}" />
                                            <RadioButton Content="Metric" GroupName="Bolting" 
                                             IsChecked="{Binding Bolting, Mode=TwoWay,
                                    Converter={StaticResource  ResourceKey=enumMatchToBooleanConverter},
                                    ConverterParameter=Metric}" Margin="0,5,0,0"/>
                                            
                                            <!--<RadioButton Content="English" GroupName="Bolting" 
                                              IsChecked="{Binding BoltingIsEnglish, Mode=TwoWay}" Margin="0,5,0,0"/>
                                            <RadioButton Content="Metric" GroupName="Bolting"
                                             IsChecked="{Binding BoltingIsMetric, Mode=TwoWay}" Margin="0,5,0,0"/>-->
                                        </StackPanel>
                                    </GroupBox>
                                    <GroupBox Header="Tray 1" Style="{StaticResource GlobalGroupBoxStyle}" Margin="5,0,0,0" Grid.Row="0" Grid.Column="2">
                                        <StackPanel Orientation="Vertical" Margin="0,5,0,0">
                                            <RadioButton Content="Top" GroupName="Tray1" IsChecked="{Binding ReverseSort, Converter={StaticResource RadioButtonCheckedConverter}, ConverterParameter={StaticResource False}}"/>
                                            <RadioButton Content="Bottom" GroupName="Tray1" IsChecked="{Binding ReverseSort, Converter={StaticResource RadioButtonCheckedConverter}, ConverterParameter={StaticResource True}}" Margin="0,5,0,0"/>
                                        </StackPanel>
                                    </GroupBox>
                                </Grid>
                            </Grid>
                        </GroupBox>
                        <GroupBox Style="{StaticResource GlobalGroupBoxStyle}" Grid.Row="1" Grid.Column="0" Header="Optional Project Data">

                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="170"/>
                                </Grid.RowDefinitions>
                                <!--0th Row-->
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
                                    <Label Style="{StaticResource LabelStyle}" Content="ID No: "/>
                                    <CC:CustomTextBox x:Name="tbIdNo" Style="{StaticResource Local_TextBoxHeight}" MaxLength="6"    CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedIDNo, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Text="{Binding IDNumber, UpdateSourceTrigger=PropertyChanged}"/>
                                    <!--<ContentPresenter Content="{Binding ElementName=tbIdNo,  Path=(Validation.Errors)[0]}"/>-->
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2">
                                    <Label Style="{StaticResource LabelStyle}" HorizontalAlignment="Left" Content="Network No:"/>
                                    <CC:CustomTextBox MaxLength="10"  Style="{StaticResource Local_TextBoxHeight}" Text="{Binding SAPNumber, UpdateSourceTrigger=PropertyChanged}" Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Margin="5,0,5,0"></CC:CustomTextBox>
                                </StackPanel>
                                <!--1st Row-->
                                <Button Content="Notes" Style="{StaticResource WrapButton}" Grid.Row="1" Command="{Binding Command_Notes}" Visibility="{Binding EditProjectPropertyVisibilty,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource VisibleIfTrueConverter}}"/>
                                <Label Style="{StaticResource LabelStyle}" Content="Apply Metric Ring Specs?" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"/>
                                <CheckBox IsChecked="{Binding MetricRings}" VerticalAlignment="Center" Grid.Row="1" Grid.Column="3"/>

                                <!--2nd Row-->
                                <Label Style="{StaticResource LabelStyle}" Content="Contractor: " Grid.Row="2" Grid.Column="0"/>
                                <ComboBox Style="{StaticResource ComboBoxStyle}" IsEditable="True" 
                                ItemsSource="{Binding Contractors,Mode=TwoWay, IsAsync=True, UpdateSourceTrigger=PropertyChanged}"
                                SelectedValue="{Binding Contractor, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                Text="{Binding NewContractor, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"
                                Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="3"/>

                                <!--3rd Row-->
                                <Label Style="{StaticResource LabelStyle}" Content="Licensor: " Grid.Row="3" Grid.Column="0"/>
                                <ComboBox Style="{StaticResource ComboBoxStyle}" IsEditable="True"
                                ItemsSource="{Binding Licensors,Mode=TwoWay, IsAsync=True, UpdateSourceTrigger=PropertyChanged}"
                                SelectedValue="{Binding ProcessLicensor, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                Text="{Binding NewLicensor, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"
                                Grid.Column="1" Grid.ColumnSpan="3" Grid.Row="3"/>
                                <!--4th Row-->
                                <Label Style="{StaticResource LabelStyle}" Content="Tray Vendor: " Grid.Row="4" Grid.Column="0"  Visibility="{Binding VisibilityMDDraw}"/>
                                <ComboBox Style="{StaticResource ComboBoxStyle}" IsEditable="True"
                                ItemsSource="{Binding TrayVendors,Mode=TwoWay, IsAsync=True, UpdateSourceTrigger=PropertyChanged}"
                                SelectedValue="{Binding TrayVendor, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                Text="{Binding NewTrayVendor, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"
                                      Visibility="{Binding VisibilityMDDraw}"
                                Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3"/>
                                <!--5th row-->
                                <GroupBox Style="{StaticResource GlobalGroupBoxStyle}" Header="Customer Information" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="4">

                                    <Grid Margin="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <Label Style="{StaticResource LabelStyle}" Content="Name: " Grid.Column="0" Grid.Row="0"/>
                                        <ComboBox Style="{StaticResource ComboBoxStyle}" IsEditable="True"
                                    ItemsSource="{Binding Customers,Mode=TwoWay, IsAsync=True, UpdateSourceTrigger=PropertyChanged}"
                                    SelectedValue="{Binding CustomerName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   Text="{Binding NewCustomer, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"
                                    Grid.Row="0" Grid.Column="1"/>

                                        <Label Style="{StaticResource LabelStyle}" Content="Service: " Grid.Column="0" Grid.Row="1"/>
                                        <ComboBox Style="{StaticResource ComboBoxStyle}" IsEditable="True"
                                    ItemsSource="{Binding Services,Mode=TwoWay, IsAsync=True, UpdateSourceTrigger=PropertyChanged}"
                                    SelectedValue="{Binding Service, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   Text="{Binding NewService, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"
                                    Grid.Column="1" Grid.Row="1"/>

                                        <Label Style="{StaticResource LabelStyle}" Content="Location: " Grid.Column="0" Grid.Row="2"/>
                                        <CC:CustomTextBox HorizontalContentAlignment ="Left"  Style="{StaticResource Local_TextBoxHeight}" Grid.Row="2" Grid.Column="1" Text="{Binding Location, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch" Width="auto"/>
                                        <Label Style="{StaticResource LabelStyle}" Content="Item No:" Grid.Row="3" Grid.Column="0"/>

                                        <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1">
                                            <CC:CustomTextBox Width="80" ToolTip="{Binding ItemNo}" Style="{StaticResource Local_TextBoxHeight}" Text="{Binding ItemNo, UpdateSourceTrigger=PropertyChanged}"/>
                                            <Label Style="{StaticResource LabelStyle}" Content="PO No: "/>
                                            <CC:CustomTextBox Width="80" ToolTip="{Binding PONo}" Style="{StaticResource Local_TextBoxHeight}" Text="{Binding PONo, UpdateSourceTrigger=PropertyChanged}"/>
                                        </StackPanel>
                                        <CheckBox IsChecked="{Binding ForExport}" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Content="Export Shipping" VerticalAlignment="Center"/>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </GroupBox>
                        <Button Style="{StaticResource WrapButton}" HorizontalAlignment="Left" Content="Cancel" Grid.Column="0" Grid.Row="3" Command="{Binding CancelCommand}" IsCancel="True"/>
                        <Button x:Name="OKButton" Style="{StaticResource WrapButton}" HorizontalAlignment="Right"  Content="OK" Command="{Binding Command_Save}" Grid.Column="0" Grid.Row="3" IsDefault="True"/>
                        <ToggleButton 
                             CommandParameter="{Binding IsChecked, RelativeSource={RelativeSource Self}}"
                            Style="{StaticResource UnitsToggleButtonStyle_Small}"  
                            IsChecked="{Binding IsEnglishSelected,Mode=TwoWay }"
                            Height="20"
                            FontSize="8"
                            HorizontalAlignment="Center" 
                            ToolTip="Form Display Units"
                            Margin="0,0,0,0" Grid.Row="4"/>

                        <GroupBox Style="{StaticResource GlobalGroupBoxStyle}" Grid.Row="2" Visibility="{Binding EditProjectPropertyVisibilty,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource VisibleIfTrueConverter}}" Header ="Reference/Control Constants" Margin="0,0,0,5" >
                            <StackPanel>
                                <Grid Visibility="{Binding VisibilityMDSpout}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="30"></RowDefinition>
                                        <RowDefinition Height="Auto" MinHeight="30"></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                                        <ColumnDefinition Width="Auto" MinWidth="80"></ColumnDefinition>
                                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Label Style="{StaticResource LabelStyle}" Content="Spout Area Deviation Limit" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right"></Label>
                                    <CC:NumericTextBox KeyDown="OnKeyPressHandler" KeyUp="OnKeyPressHandler" x:Name="txtSpoutAreaDeviationLimit" Grid.Row="0" Grid.Column="1" Margin="0,4,0,0" Style="{StaticResource Local_TextBoxHeight}" 
                                           CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedSpoutAreaDeviationLimit, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="80"
                                           ZerosAsNullString="True"
                                            Text="{Binding DataContext.SpoutAreaDeviationLimit, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay,StringFormat=f2,UpdateSourceTrigger=LostFocus}">
                                    </CC:NumericTextBox>

                                    <Label Grid.Row="0" Grid.Column="2" Content="%" VerticalAlignment="Center" Margin="2,0,0,0"  FontWeight="Bold"></Label>
                                    <Label Style="{StaticResource LabelStyle}" Content="Distribution Convergence Limit:" Grid.Row="1" Grid.Column="0"></Label>
                                    <CC:NumericTextBox KeyDown="OnKeyPressHandler" KeyUp="OnKeyPressHandler" x:Name="txtDistributionConvLimit" Grid.Row="1" Grid.Column="1" Margin="0,4,0,0" Style="{StaticResource Local_TextBoxHeight}" 
                                           CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedDistributionConvLimit, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="80"
                                           ZerosAsNullString="True"
                                            Text="{Binding DataContext.ConvergenceLimit, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay,StringFormat=f6,UpdateSourceTrigger=LostFocus}">
                                    </CC:NumericTextBox>

                                    <Label Style="{StaticResource LabelStyle}" Content="DC Spacing Opt. Method:" Grid.Row="2" Grid.Column="0" HorizontalAlignment="Right"></Label>
                                    <RadioButton Content="Standard" Grid.Row="2" Grid.Column="1" Margin="-2,6,0,0" GroupName="SpacingMethod" IsChecked="{Binding SpacingMethod, Mode=TwoWay, Converter={StaticResource enumMatchToBooleanConverter}, ConverterParameter=NonWeighted}"></RadioButton>
                                    <RadioButton  Content="Weighted" Grid.Row="2" Grid.Column="2" Margin="-12,6,0,0" GroupName="SpacingMethod" IsChecked="{Binding SpacingMethod, Mode=TwoWay, Converter={StaticResource enumMatchToBooleanConverter}, ConverterParameter=Weighted}"></RadioButton>

                                    <CheckBox IsChecked="{Binding MetricSpouting}" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Content="Metric Spouting" VerticalAlignment="Center"/>
                                </Grid>
                                <Grid Visibility="{Binding VisibilityMDDraw}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="30"/>
                                        <RowDefinition Height="Auto" MinHeight="30"/>
                                        <RowDefinition Height="Auto" MinHeight="30"/>
                                        <RowDefinition Height="Auto" MinHeight="30"/>
                                        <RowDefinition Height="Auto" MinHeight="30"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>

                                    </Grid.ColumnDefinitions>
                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" Margin="0,0,18,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Design Letter:" HorizontalAlignment="Left" Margin="0,2"></Label>
                                        <TextBox x:Name="txtDesnLtr" Text="{Binding ColumnLetter, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" CharacterCasing="Upper"  MaxLength="1" Style="{StaticResource Local_TextBoxHeight}" Width="45" MinWidth="45" ></TextBox>

                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right">
                                        <Label Style="{StaticResource LabelStyle}" Content="Hardware Spares:"  HorizontalAlignment="Left" Margin="0,2"></Label>
                                        <CC:NumericTextBox  KeyDown="OnKeyPressHandler" KeyUp="OnKeyPressHandler" x:Name="txtSparePercentage" HorizontalAlignment="Left" Margin="0,4,0,0" Style="{StaticResource Local_TextBoxHeight}" 
                                           CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedHardwareSpares, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="45" MinWidth="45"
                                           ZerosAsNullString="True"
                                            Text="{Binding DataContext.HardwareSparePercentage, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay,StringFormat=f2,UpdateSourceTrigger=LostFocus}" Height="26">
                                        </CC:NumericTextBox>
                                        <Label Content="%" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="2,2,0,2"  FontWeight="Bold"></Label>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="0" HorizontalAlignment="Stretch">
                                        <Label Style="{StaticResource LabelStyle}" Content="Clip/Clamp Spares:"  HorizontalAlignment="Left" Margin="0,2"></Label>
                                        <CC:NumericTextBox KeyDown="OnKeyPressHandler" KeyUp="OnKeyPressHandler" x:Name="txtClipSparePercentage" HorizontalAlignment="Left" Margin="0,4,0,0" Style="{StaticResource Local_TextBoxHeight}" 
                                           CustomProperty:FocusExtension.IsFocused="{Binding IsFocusedSpoutAreaDeviationLimit, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="45" MinWidth="45"
                                           ZerosAsNullString="True"
                                            Text="{Binding DataContext.ClipSparePercentage, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay,StringFormat=f2,UpdateSourceTrigger=LostFocus}" Height="26">
                                        </CC:NumericTextBox>
                                        <Label Content="%" VerticalAlignment="Center" Margin="2,2,0,2" HorizontalAlignment="Left" FontWeight="Bold"></Label>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" Margin="0,0,18,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Cust. Drawing Units:" HorizontalAlignment="Left" Margin="0,2"></Label>

                                        <ToggleButton 
                                         CommandParameter="{Binding IsChecked, RelativeSource={RelativeSource Self}}"
                                        Style="{StaticResource UnitsToggleButtonStyle_Small}"  
                                        IsChecked="{Binding IsCustomerDrawingUnitsEnglish, Mode = TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        Height="20"
                                        FontSize="8"
                                        HorizontalAlignment="Center" 
                                        Margin="0,0,0,0"/>

                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" Margin="0,0,18,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Mfg. Drawing Units:" HorizontalAlignment="Left" Margin="0,2"></Label>

                                        <ToggleButton 
                                         CommandParameter="{Binding IsChecked, RelativeSource={RelativeSource Self}}"
                                        Style="{StaticResource UnitsToggleButtonStyle_Small}"  
                                        IsChecked="{Binding IsManufacturingDrawingUnitsEnglish, Mode = TwoWay , UpdateSourceTrigger=PropertyChanged}"
                                        Height="20"
                                        FontSize="8"
                                        HorizontalAlignment="Center" 
                                        Margin="0,0,0,0"/>

                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Stretch" Margin="31,0,0,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Functional DN:" HorizontalAlignment="Left" Margin="0,2"/>
                                        <TextBox x:Name="txtDN1" Text="{Binding DNFunctional, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                                        IsEnabled="True" CharacterCasing="Upper"  MaxLength="7" Style="{StaticResource Local_TextBoxHeight}" 
                                        MinWidth="120" 
                                        ToolTip="Functional Drawing Number"
                                                 />


                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1" HorizontalAlignment="Stretch" Margin="29,0,0,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Installation DN:" HorizontalAlignment="Left" Margin="0,2"/>
                                        <TextBox x:Name="txtDN2" Text="{Binding DNInstallation, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                                        IsEnabled="True" CharacterCasing="Upper"  MaxLength="7" Style="{StaticResource Local_TextBoxHeight}" 
                                        MinWidth="120" 
                                        ToolTip="Installation Drawing Number"
                                                 />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Grid.Row="4" Grid.Column="1" HorizontalAlignment="Stretch" Margin="9,0,0,0">

                                        <Label Style="{StaticResource LabelStyle}" Content="Manufacturing DN:" HorizontalAlignment="Left" Margin="0,2"/>
                                        <TextBox x:Name="txtDN3" Text="{Binding DNManufacturing, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                                        IsEnabled="True" CharacterCasing="Upper"  MaxLength="7" Style="{StaticResource Local_TextBoxHeight}" 
                                        MinWidth="120" 
                                        ToolTip="Manufacturing Drawing Number"
                                                 />
                              
                                    </StackPanel>
   
                                </Grid>
                            </StackPanel>
                        </GroupBox>
                    </Grid>
                </GroupBox>

            <!--</xceed:BusyIndicator>-->
        </ScrollViewer>
    </Grid>
</Window>

