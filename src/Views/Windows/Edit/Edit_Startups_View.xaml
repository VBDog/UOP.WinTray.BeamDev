<Window x:Class="UOP.WinTray.UI.Views.Edit_Startups_View"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UOP.WinTray.UI.Views"
        xmlns:customControl="clr-namespace:UOP.WinTray.UI.CustomControls"
        xmlns:conv="clr-namespace:UOP.WinTray.UI.Converters"
        xmlns:cntrls="clr-namespace:UOP.WinTray.UI.CustomControls.UserControls"
        xmlns:autolocator ="clr-namespace:UOP.WinTray.UI"
        xmlns:waitIndicator="clr-namespace:UOP.WinTray.UI.CustomControls.AdornerControl"
        xmlns:winTrayUI="clr-namespace:UOP.WinTray.UI"
        xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs" 
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:dxfgraphiccontrol="clr-namespace:UOP.DXFGraphicsControl;assembly=UOP.DXFGraphicsControl"
           xmlns:viewmodels="clr-namespace:UOP.WinTray.UI.ViewModels"
        d:DataContext="{d:DesignInstance Type=viewmodels:Edit_Startups_ViewModel}"
        md:DialogServiceViews.IsRegistered="True"
         mc:Ignorable="d" 
        SizeToContent="Width"
        MinWidth="300"
        MaxHeight="{x:Static SystemParameters.MaximizedPrimaryScreenHeight}"        
        Title="{Binding EditStartupTitle}" 
        Style="{StaticResource PopUpWindowTheme}" 
        Closing="Window_Closing"
        Loaded="Window_Loaded"
        Unloaded="Window_Unloaded"
        Activated="Window_Activated"
       WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <!--Local text Box Style-->
        <Style x:Key="Local_TextBox_Style" TargetType="TextBox">
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="1,1,20,1"/>
            <Setter Property="Width" Value="Auto"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Foreground" Value="{Binding TxtColor}"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Background" Value="AliceBlue"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!--Local data label Style-->
        <Style x:Key="Local_DataLabel_Style" TargetType="Label">
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Margin" Value="3,-2,2,0"/>
            <Setter Property="Width" Value="Auto"/>
            <Setter Property="Height" Value="Auto"/>
            <Setter Property="Foreground" Value="{Binding TxtColor}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontWeight" Value="Regular"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="MinHeight" Value="3"/>
            <Setter Property="IsEnabled" Value="True"/>
        </Style>
        <!--Local data name label Style-->
        <Style x:Key="Local_DataName_Style" TargetType="Label">
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Right"/>
            <Setter Property="Margin" Value="3,-2,2,0"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontWeight" Value="Regular"/>

            <Setter Property="MinWidth" Value="15"/>
            <Setter Property="MinHeight" Value="3"/>
            <Setter Property="IsEnabled" Value="True"/>

        </Style>
        <conv:InverseBooleanConverter x:Key="InverseBooleanConverter" />

        <!--<DataTemplate DataType="{x:Type ValidationError}">
            <TextBlock FontStyle="Italic" Foreground="Red" HorizontalAlignment="Right" Margin="0,1" Text="{Binding Path=ErrorContent}"/>
        </DataTemplate>-->
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400*"/>
            <ColumnDefinition Width="800*"/>
        </Grid.ColumnDefinitions>
        <!--<Menu Grid.Row="0" Background="#F6F8F5" Name="mnuTools">
                    <MenuItem Header="_Tools"  IsEnabled="{Binding IsEnabled}">
                        <MenuItem Header="Toggle Spout"  Command="{Binding Command_Toggle}" Visibility="{Binding Visibility_Generation}" />
                        <MenuItem Header="Drag"  Command="{Binding Command_DragY}" Visibility="{Binding Visibility_Positioning}" />
                        <MenuItem Header="Set Y"  Command="{Binding Command_SetY}" Visibility="{Binding Visibility_Positioning}" />
                        <MenuItem Header="Align"  Command="{Binding Command_AlignY}" Visibility="{Binding Visibility_Positioning}"/>
                    </MenuItem>
            </Menu>-->
        <Viewbox Grid.Row="1" IsEnabled="{Binding IsEnabled}" >
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <Grid Margin="2,0,0,0"  Background="#F6F8F5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="2.5*"/>
                        <ColumnDefinition Width="2.5*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Name="DataPanel">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>

                        </Grid.RowDefinitions>
                        <GroupBox   Grid.Row="0" Header="Startup Spout Overview" FontSize="10" FontWeight="Bold">
                            <Grid Margin="0,10,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Label Content="Ideal Area:" Grid.Row="0" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding IdealArea,Mode=OneWay}" Grid.Row="0" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" />

                                <Label Content="Total Area:" Grid.Row="1" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding TotalArea,Mode=OneWay}" Grid.Row="1" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}"/>

                                <Label Content="Total Spouts:" Grid.Row="2" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding TotalSpouts,Mode=OneWay}" Grid.Row="2" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}"/>

                                <Label Content="Deviation:" Grid.Row="3" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding Deviation,Mode=OneWay}" Grid.Row="3" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" Foreground="{Binding DeviationForeColor}"/>

                                <Label Content="Spout Height:" Grid.Row="4" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding SpoutHeight,Mode=OneWay}" Grid.Row="4" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}"/>

                                <Label Content="Spout Length:" Grid.Row="5" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding SpoutLength,Mode=OneWay}" Grid.Row="5" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" Foreground="{Binding SpouLengthTxtColor}"/>

                                <Label Content="Spout Area:" Grid.Row="6" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding SpoutArea,Mode=OneWay}" Grid.Row="6" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}"/>

                                <Label Content="Max. Site:" Grid.Row="7" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding MaxSite,Mode=OneWay}" Grid.Row="7" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}"/>
                                <Label  Content="Min. Site:" Grid.Row="8" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding MinSite,Mode=OneWay}" Grid.Row="8" Grid.Column="1"  Style="{StaticResource Local_DataLabel_Style}"/>
                                <Label  Content="Override Length:" Grid.Row="9" Grid.Column="0" Style="{StaticResource Local_DataName_Style}" ToolTip="Double Click To Enter Override Length" MouseDoubleClick="Enter_Override_Length" />
                                <Label Content="{Binding OverrideStartupLength,Mode=TwoWay}" Grid.Row="9" Grid.Column="1"  Style="{StaticResource Local_DataLabel_Style}" ToolTip="Double Click To Enter Override Length" MouseDoubleClick="Enter_Override_Length" Foreground="Blue" />

                                <!--<StackPanel Grid.Row="9" Grid.Column="0" Grid.ColumnSpan="2">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Label Grid.Column="0" Content="Override Length:"  Style="{StaticResource Local_DataName_Style}"/>
                                            <customControl:NumericTextBox  Grid.Column="1" PrecisionLimit="{Binding PostDecimalDigit}" PreDecimalLengthLimit="{Binding PreDecimalLength}" Style="{StaticResource Local_TextBox_Style}" Width="40"  HorizontalAlignment="Left" FontSize="10" FontWeight="Regular">
                                                <customControl:NumericTextBox.Text >
                                                    <Binding Path="SOverrideStartupLength"  UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                                    </Binding>
                                                </customControl:NumericTextBox.Text>
                                            </customControl:NumericTextBox>
                                            <Button Grid.Column="1" Margin="30,0,0,0" Content="Ok" Height="20" Command="{Binding OverRiddenCommand}" Width="30" FontSize="8" FontWeight="Regular"/>
                                            <Label Grid.Row="1" Grid.ColumnSpan="2" Foreground="Red">
                                                <Label.Style>
                                                    <Style TargetType="{x:Type Label}">
                                                        <Setter Property="Content" Value="{Binding Path=ErrorMessage}" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ErrorMessage}" Value="">
                                                                <Setter Property="Visibility" Value="Hidden"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Label.Style>
                                            </Label>
                                        </Grid>
                                        -->
                                <!--<ContentPresenter HorizontalAlignment="Left" Grid.Column="0" Grid.ColumnSpan="2" Content="{Binding ElementName=OverrideLength, Path=(Validation.Errors).CurrentItem}" />-->
                                <!--
                                    </StackPanel>-->
                            </Grid>

                        </GroupBox>
                        <GroupBox Grid.Row="1" Header="{Binding SelectedSpoutLabel,Mode=OneWay}" FontSize="10" FontWeight="Bold" >
                            <Grid Margin="0,10,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Label Content="Y Ordinate:" Grid.Row="0" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding YOrdinate,Mode=OneWay}" Grid.Row="0" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" Foreground="{Binding TxtColor}"/>

                                <Label Content="Max Y:" Grid.Row="1" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding MaxY,Mode=OneWay}" Grid.Row="1" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" Foreground="{Binding TxtColor}"/>
                                <Label Content="Min Y:" Grid.Row="2" Grid.Column="0" Style="{StaticResource Local_DataName_Style}"/>
                                <Label Content="{Binding MinY,Mode=OneWay}" Grid.Row="2" Grid.Column="1" Style="{StaticResource Local_DataLabel_Style}" Foreground="{Binding TxtColor}"/>

                                <CheckBox Grid.Row="3" FontWeight="Regular" IsChecked="{Binding IsSpoutSelectionOn, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  Content="On/Off" Margin="10,0,0,0" HorizontalAlignment="Left" Width="57" Command="{Binding Command_Toggle}" FontSize="10" />
                            </Grid>
                        </GroupBox>
                        <GroupBox Grid.Row="2" Header="Startup Spout Generator" FontSize="10" Visibility="{Binding Visibility_Generation}">
                            <Grid Margin="3,4,3,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <RadioButton Content="None"  Margin="2,0,0,0" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" IsChecked="{Binding Config_None}" IsEnabled="{Binding AllowConfiguration}" FontSize="10" FontWeight="Normal"/>
                                <RadioButton Content="2 X 2" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" IsChecked="{Binding Config_TwoByTwo}" IsEnabled="{Binding AllowConfiguration}" FontSize="10" FontWeight="Normal"/>
                                <RadioButton Content="2 X 4" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" IsChecked="{Binding Config_TwoByFour}" IsEnabled="{Binding AllowConfiguration}"  FontSize="10" FontWeight="Normal"/>
                                <RadioButton  Content="4 X 4" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" IsChecked="{Binding Config_FourByFour}" IsEnabled="{Binding AllowConfiguration}"  FontSize="10" FontWeight="Normal"/>
                                <Button  Content="Generate Spouts" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Width="120" Margin="0,2,0,0" Command="{Binding Command_Generate}" Visibility="{Binding Visibility_Generation}"  FontSize="9" FontWeight="Normal"/>
                            </Grid>
                        </GroupBox>
                        <GroupBox Grid.Row="3" FontSize="10">
                            <Grid Margin="3,4,3,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <Button  Content="Reset" Grid.Column="0" Width="75" Margin="0,2,0,2" Command="{Binding Command_Reset}" FontSize="9"/>
                                <Button  Content="Undo" Grid.Column="1" Width="75" Margin="0,2,0,2" Command="{Binding Command_Undo}"  IsEnabled="{Binding CanUndo}" FontSize="9"/>
                            </Grid>
                        </GroupBox>
                        <GroupBox Grid.Row="4" FontSize="10">
                            <Grid  Margin="0,10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>

                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Button 
                                    Content="Cancel" 
                                    Margin="5,0,0,0"
                                    Grid.Column="0"
                                    Width="75"
                                    Command="{Binding Command_Cancel}"
                                    IsCancel="True"
                                    FontSize="10" 
                                    HorizontalAlignment="Left"
                                    />
                                <Button 
                                    Content="Save"
                                    Name="OKButton"
                                    IsDefault="True"
                                    Grid.Column="1"
                                    Width="75"
                                    Margin="0,0,5,0"
                                    IsEnabled="{Binding IsEnabled}"
                                    HorizontalAlignment="Right"
                                    Command="{Binding Command_OK}"
                                    FontSize="10"
                                    />

                                <CheckBox 
                                    Content="Allow Drag" 
                                    Grid.Column="0" 
                                    Grid.Row="1" 
                                    Margin="0,10,0,0" 
                                    HorizontalAlignment="Left" 
                                    IsChecked="{Binding IsAllowDragEnabled}" 
                                    Visibility="{Binding Visibility_AllowDrag}"
                                    />
                                <ToggleButton 
                                    CommandParameter="{Binding IsChecked, RelativeSource={RelativeSource Self}}"
                                    Style="{StaticResource UnitsToggleButtonStyle_Small}"  
                                    IsChecked="{Binding IsEnglishSelected,Mode=TwoWay }"
                                    Grid.Row="1" Grid.Column="1"
                                    Height="20"
                                    FontSize="8"
                                    Margin="2,5,2,5"
                                    HorizontalAlignment="Center" 
                                    />


                            </Grid>
                        </GroupBox>

                    </Grid>



                </Grid>


            </Grid>
        </Viewbox>
        <dxfgraphiccontrol:DXFViewer 
                        Grid.Row="1"
                        Grid.Column="1" 
                        Background="Gray"
                        Name="cadfxStartupSpoutDxfViewer" 
                         DXFImageSource="{Binding Image, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"

                        Margin="3,12,15,13"
                        MinWidth="{Binding ElementName=DataPanel, Path=ActualHeight}"
                        MinHeight="{Binding ElementName=DataPanel, Path=ActualHeight}"
                        >
            <dxfgraphiccontrol:DXFViewer.ContextMenu>
                <ContextMenu Background="#F6F8F5" >

                    <MenuItem Header= "{Binding ToggleMenuHeader}"  Command="{Binding Command_Toggle}" Visibility="{Binding Visibility_Generation}" />
                    <MenuItem Header="Drag"  Command="{Binding Command_DragY}" Visibility="{Binding Visibility_Positioning}" />
                    <MenuItem Header="Set Y"  Command="{Binding Command_SetY}" Visibility="{Binding Visibility_Positioning}" />
                    <MenuItem Header="Align"  Command="{Binding Command_AlignY}" Visibility="{Binding Visibility_Positioning}"/>
                </ContextMenu>

                <!--<ContextMenu ItemsSource="{Binding ContextItems}" IsEnabled="{Binding IsEnabled}">
                        <ContextMenu.ItemContainerStyle>
                            <Style TargetType="{x:Type MenuItem}">
                                <Setter Property="Header" Value="{Binding Header}"/>
                                <Setter Property="Command" Value="{Binding Command}"/>
                            </Style>
                        </ContextMenu.ItemContainerStyle>
                    </ContextMenu>-->
            </dxfgraphiccontrol:DXFViewer.ContextMenu>
        </dxfgraphiccontrol:DXFViewer>
        <Grid Grid.Row="3" Grid.ColumnSpan="2" Visibility="{Binding Visibility_Progress}">
            <!-- The status bar -->
            
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="45" />  
            </Grid.ColumnDefinitions>

            <Label Grid.Column="0" Name="rightStatusBarLabel" Margin="5" Content="{Binding BusyMessage}" VerticalAlignment="Center" HorizontalAlignment="Right"  Visibility="{Binding Visibility_Progress}"/>
                <!--<ProgressBar Grid.Column="3" Name="progressBar" Margin="5"  IsIndeterminate="True"/>-->
            <Viewbox   Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="3"  Visibility="{Binding Visibility_Progress}">
                    <cntrls:CircularProgressBar 
Background="Transparent" 
  Visibility="{Binding Visibility_Progress}"  />
                </Viewbox>
               
           
        </Grid>
    </Grid>

</Window>


